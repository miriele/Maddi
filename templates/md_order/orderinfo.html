{% load static %}
<script src="{% static 'js/script_order.js' %}"></script>
{% block content %}
<head>
    <title>주문하기</title>
</head>
<h2> 주문하기 </h2>
<form method="post" action="orderinfo" name="inputform">
<input type="hidden" name="stor_m_id" value="{{ dto.stor_m_id }}">
	<table>
	    <tr>
	        <th rowspan="6"><img src="/media/images/{{ stor_m_img }}" width="200" height="200"></th>
	    </tr>
	    <tr>
	        <th>메뉴명</th>
	        <td>&nbsp;{{ stor_m_name }}</td>
	    </tr>
	    <tr>
	        <th>가격</th>
	        <td>&nbsp;{{ stor_m_pric }}</td>
	    </tr>
	    <tr>
		    <td colspan="2">
		    		<input class="input" type="text" name="bucknum" maxlength="20" style="width: 250px" value="{{ bucknum }}">
					<button type="button" id="plus-button">+</button>
					<button type="button" id="minus-button">-</button>
		    </td>
		</tr>
		<tr>
	    	<td>&nbsp;{{ buckprice }}</td>
	    </tr>
	    <tr>
		    <td colspan="2">
		      <!-- 장바구니 버튼은 CartView로 폼 전송 -->
		      <form method="post" action="{% url 'md_order:cart' %}">
		        {% csrf_token %}
		        <input type="hidden" name="stor_m_id" value="{{ dto.stor_m_id }}">
		        <input type="hidden" name="bucknum" value="{{ bucknum }}">
		        <input class="inputbutton" type="submit" value="장바구니">
		      </form>
	          <form method="post" action="{% url 'md_order:order' %}">
		        {% csrf_token %}
		        <input type="hidden" name="stor_m_id" value="{{ dto.stor_m_id }}">
		        <input type="hidden" name="bucknum" value="{{ bucknum }}">
		        <input class="inputbutton" type="submit" value="바로주문">
		      </form>
	        </td>
        </tr>
	    <tr>
	        <th colspan="3"> 상세정보</th>
	    </tr>
	    <tr>
	        <th colspan="3"> 메뉴 소개 </th>
	    </tr>
	    <tr>
	        <th colspan="3"> &nbsp;{{ stor_m_info }}</th>
	    </tr>
	    <tr>
	        <th>메뉴유형</th>
	        <td>&nbsp;{{ menu_type }}</td>
	    </tr>
	    <tr>
		    <th>알러지</th>
		    <td>&nbsp;{{ algy_n }}</td>
		</tr>

	    <tr>
	        <th>칼로리</th>
	        <td>&nbsp;{{ stor_m_cal }}</td>
	    </tr>
	     <tr>
	        <th colspan="3">추천조합이 출력될 예정</th>
	    </tr>
	</table>
</form>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const plusButton = document.getElementById("plus-button");
    const minusButton = document.getElementById("minus-button");
    const bucknumInput = document.getElementById("bucknum-input");
    
    // + 버튼 클릭 이벤트 처리
    plusButton.addEventListener("click", function() {
      let bucknum = parseInt(bucknumInput.value) || 0;
      bucknum += 1;
      bucknumInput.value = bucknum;
      // 여기에서 필요한 경우 buckprice 등 다른 정보를 업데이트할 수 있습니다.
    });
    
    // - 버튼 클릭 이벤트 처리
    minusButton.addEventListener("click", function() {
      let bucknum = parseInt(bucknumInput.value) || 0;
      if (bucknum > 0) {
        bucknum -= 1;
        bucknumInput.value = bucknum;
        // 여기에서 필요한 경우 buckprice 등 다른 정보를 업데이트할 수 있습니다.
      }
    });
  });
</script>

{% endblock %}